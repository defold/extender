name: extender

services:
  frontend-dev:
    image: defold/extender-base-app:latest
    extends:
      file: common-services.yml
      service: common_builder
    command: ["--spring.config.location=classpath:./,file:/etc/defold/extender/", "--spring.profiles.active=local-dev-app"]
    expose:
      - "9000"
    ports:
      - "9000:9000"
    profiles:
      - all
      - android
      - web
      - linux
      - windows
      - consoles
      - nintendo
      - playstation
    networks:
      default:
        aliases:
          - frontend
  linux-dev:
    image: defold/extender-linux-app:latest
    extends:
      file: common-services.yml
      service: remote_builder
    profiles:
      - all
      - linux
    networks:
      default:
        aliases:
          - linux
  android_ndk25-dev:
    image: defold/extender-android-ndk25-app:latest
    extends:
      file: common-services.yml
      service: common_builder
    command: ["--spring.config.location=classpath:./,file:/etc/defold/extender/", "--spring.profiles.active=local-dev-android"]
    profiles:
      - all
      - android
    networks:
      default:
        aliases:
          - android_ndk25
  emscripten_2011-dev:
    image: defold/extender-emsdk-2011-app:latest
    extends:
      file: common-services.yml
      service: remote_builder
    profiles:
      - all
      - web
    networks:
      default:
        aliases:
          - emscripten_2011
  emscripten_3155-dev:
    image: defold/extender-emsdk-3155-app:latest
    extends:
      file: common-services.yml
      service: remote_builder
    profiles:
      - all
      - web
    networks:
      default:
        aliases:
          - emscripten_3155
  nssdk_1532-dev:
    image: defold/extender-nssdk-1532-app:latest
    extends:
      file: common-services.yml
      service: remote_builder
    profiles:
      - all
      - consoles
      - nintendo
    networks:
      default:
        aliases:
          - nssdk_1532
  nssdk_1753-dev:
    image: defold/extender-nssdk-1753-app:latest
    extends:
      file: common-services.yml
      service: remote_builder
    profiles:
      - all
      - consoles
      - nintendo
    networks:
      default:
        aliases:
          - nssdk_1753
  ps4_11000-dev:
    image: defold/extender-ps4-11000-app:latest
    extends:
      file: common-services.yml
      service: remote_builder
    profiles:
      - all
      - consoles
      - playstation
    networks:
      default:
        aliases:
          - ps4_11000
  ps4_10500-dev:
    image: defold/extender-ps4-10500-app:latest
    extends:
      file: common-services.yml
      service: remote_builder
    profiles:
      - all
      - consoles
      - playstation
    networks:
      default:
        aliases:
          - ps4_10500
  ps5_8000-dev:
    image: defold/extender-ps5-8000-app:latest
    extends:
      file: common-services.yml
      service: remote_builder
    profiles:
      - all
      - consoles
      - playstation
    networks:
      default:
        aliases:
          - ps5_8000
  win_2019-dev:
    image: defold/extender-winsdk-2019-app:latest
    extends:
      file: common-services.yml
      service: remote_builder
    profiles:
      - all
      - windows
    networks:
      default:
        aliases:
          - win_2019
  win_2022-dev:
    image: defold/extender-winsdk-2022-app:latest
    extends:
      file: common-services.yml
      service: remote_builder
    profiles:
      - all
      - windows
    networks:
      default:
        aliases:
          - win_2022

# services for integration testing
  frontend-integration-test:
    image: defold/extender-base-app:latest
    extends:
      file: common-services.yml
      service: test_builder
    command: ["--spring.config.location=classpath:./,file:/etc/defold/extender/", "--spring.profiles.active=local-dev-app"]
    expose:
      - "9000"
    ports:
      - "9000:9000"
    profiles:
      - test
    networks:
      default:
        aliases:
          - frontend
  linux-integration-test:
    image: defold/extender-linux-app:latest
    extends:
      file: common-services.yml
      service: test_remote_builder
    profiles:
      - test
    networks:
      default:
        aliases:
          - linux
  android_ndk25-integration-test:
    image: defold/extender-android-ndk25-app:latest
    extends:
      file: common-services.yml
      service: test_builder
    command: ["--spring.config.location=classpath:./,file:/etc/defold/extender/", "--spring.profiles.active=local-dev-android"]
    profiles:
      - test
    networks:
      default:
        aliases:
          - android_ndk25
  emscripten_2011-integration-test:
    image: defold/extender-emsdk-2011-app:latest
    extends:
      file: common-services.yml
      service: test_remote_builder
    profiles:
      - test
    networks:
      default:
        aliases:
          - emscripten_2011
  emscripten_3155-integration-test:
    image: defold/extender-emsdk-3155-app:latest
    extends:
      file: common-services.yml
      service: test_remote_builder
    profiles:
      - test
    networks:
      default:
        aliases:
          - emscripten_3155
  win_2019-integration-test:
    image: defold/extender-winsdk-2019-app:latest
    extends:
      file: common-services.yml
      service: test_remote_builder
    profiles:
      - test
    networks:
      default:
        aliases:
          - win_2019
  win_2022-integration-test:
    image: defold/extender-winsdk-2022-app:latest
    extends:
      file: common-services.yml
      service: test_remote_builder
    profiles:
      - test
    networks:
      default:
        aliases:
          - win_2022